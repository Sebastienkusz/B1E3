2023-07-26 12:53:09,782:DEBUG:urllib3.connectionpool:http://localhost:None "GET /v2/connections?snap=certbot&interface=content HTTP/1.1" 200 97
2023-07-26 12:53:10,005:DEBUG:certbot._internal.main:certbot version: 2.6.0
2023-07-26 12:53:10,005:DEBUG:certbot._internal.main:Location of certbot entry point: /snap/certbot/3024/bin/certbot
2023-07-26 12:53:10,005:DEBUG:certbot._internal.main:Arguments: ['--non-interactive', '--agree-tos', '--manual', '--config-dir=./certbot/config', '--logs-dir=./certbot/logs', '--work-dir=./certbot/work', '--email', 'jlabat@simplonformations.onmicrosoft.com', '--preferred-challenges=http', '--manual-auth-hook', './scripts/auth-host.sh', '--manual-cleanup-hook', './scripts/cleanup-host.sh', '-d', 'b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com', '--preconfigured-renewal']
2023-07-26 12:53:10,005:DEBUG:certbot._internal.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#manual,PluginEntryPoint#nginx,PluginEntryPoint#null,PluginEntryPoint#standalone,PluginEntryPoint#webroot)
2023-07-26 12:53:10,016:DEBUG:certbot._internal.log:Root logging level set at 30
2023-07-26 12:53:10,017:DEBUG:certbot._internal.plugins.selection:Requested authenticator manual and installer None
2023-07-26 12:53:10,018:DEBUG:certbot._internal.plugins.selection:Single candidate plugin: * manual
Description: Manual configuration or run your own shell scripts
Interfaces: Authenticator, Plugin
Entry point: manual = certbot._internal.plugins.manual:Authenticator
Initialized: <certbot._internal.plugins.manual.Authenticator object at 0x7fa891244ee0>
Prep: True
2023-07-26 12:53:10,018:DEBUG:certbot._internal.plugins.selection:Selected authenticator <certbot._internal.plugins.manual.Authenticator object at 0x7fa891244ee0> and installer None
2023-07-26 12:53:10,018:INFO:certbot._internal.plugins.selection:Plugins selected: Authenticator manual, Installer None
2023-07-26 12:53:10,055:DEBUG:certbot._internal.main:Picked account: <Account(RegistrationResource(body=Registration(key=None, contact=(), agreement=None, status=None, terms_of_service_agreed=None, only_return_existing=None, external_account_binding=None), uri='https://acme-v02.api.letsencrypt.org/acme/acct/1225942037', new_authzr_uri=None, terms_of_service=None), c33ca69de7c160c8b8888fd3971fa0b8, Meta(creation_dt=datetime.datetime(2023, 7, 26, 9, 59, 25, tzinfo=<UTC>), creation_host='DESKTOP-TMEOBCI.', register_to_eff=None))>
2023-07-26 12:53:10,056:DEBUG:acme.client:Sending GET request to https://acme-v02.api.letsencrypt.org/directory.
2023-07-26 12:53:10,057:DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): acme-v02.api.letsencrypt.org:443
2023-07-26 12:53:10,601:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "GET /directory HTTP/1.1" 200 752
2023-07-26 12:53:10,601:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Wed, 26 Jul 2023 10:53:10 GMT
Content-Type: application/json
Content-Length: 752
Connection: keep-alive
Cache-Control: public, max-age=0, no-cache
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "keyChange": "https://acme-v02.api.letsencrypt.org/acme/key-change",
  "kyspwUndnSY": "https://community.letsencrypt.org/t/adding-random-entries-to-the-directory/33417",
  "meta": {
    "caaIdentities": [
      "letsencrypt.org"
    ],
    "termsOfService": "https://letsencrypt.org/documents/LE-SA-v1.3-September-21-2022.pdf",
    "website": "https://letsencrypt.org"
  },
  "newAccount": "https://acme-v02.api.letsencrypt.org/acme/new-acct",
  "newNonce": "https://acme-v02.api.letsencrypt.org/acme/new-nonce",
  "newOrder": "https://acme-v02.api.letsencrypt.org/acme/new-order",
  "renewalInfo": "https://acme-v02.api.letsencrypt.org/draft-ietf-acme-ari-01/renewalInfo/",
  "revokeCert": "https://acme-v02.api.letsencrypt.org/acme/revoke-cert"
}
2023-07-26 12:53:10,602:DEBUG:certbot._internal.cert_manager:Renewal conf file /home/seb/Codes/b1e3-gr2/certbot/config/renewal/b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com.conf is broken. Skipping.
2023-07-26 12:53:10,604:DEBUG:certbot._internal.cert_manager:Traceback was:
Traceback (most recent call last):
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/cert_manager.py", line 437, in _search_lineages
    candidate_lineage = storage.RenewableCert(renewal_file, cli_config)
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/storage.py", line 510, in __init__
    self._check_symlinks()
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/storage.py", line 589, in _check_symlinks
    raise errors.CertStorageError(
certbot.errors.CertStorageError: expected /home/johan/b1e3-gr2/certbot/config/live/b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com/cert.pem to be a symlink

2023-07-26 12:53:10,604:DEBUG:certbot._internal.display.obj:Notifying user: Requesting a certificate for b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com
2023-07-26 12:53:10,612:DEBUG:acme.client:Requesting fresh nonce
2023-07-26 12:53:10,613:DEBUG:acme.client:Sending HEAD request to https://acme-v02.api.letsencrypt.org/acme/new-nonce.
2023-07-26 12:53:10,751:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "HEAD /acme/new-nonce HTTP/1.1" 200 0
2023-07-26 12:53:10,751:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Wed, 26 Jul 2023 10:53:10 GMT
Connection: keep-alive
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 327CzdtqHU8AXRg9mk0AcgRH1TLfm5FksoF1xnmSRHTiBIE
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800


2023-07-26 12:53:10,751:DEBUG:acme.client:Storing nonce: 327CzdtqHU8AXRg9mk0AcgRH1TLfm5FksoF1xnmSRHTiBIE
2023-07-26 12:53:10,751:DEBUG:acme.client:JWS payload:
b'{\n  "identifiers": [\n    {\n      "type": "dns",\n      "value": "b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com"\n    }\n  ]\n}'
2023-07-26 12:53:10,753:DEBUG:acme.client:Sending POST request to https://acme-v02.api.letsencrypt.org/acme/new-order:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS12MDIuYXBpLmxldHNlbmNyeXB0Lm9yZy9hY21lL2FjY3QvMTIyNTk0MjAzNyIsICJub25jZSI6ICIzMjdDemR0cUhVOEFYUmc5bWswQWNnUkgxVExmbTVGa3NvRjF4bm1TUkhUaUJJRSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvbmV3LW9yZGVyIn0",
  "signature": "ItM6MD5UZK6pcsg9CifwAyjQqmIyk-j5UZXtmXaFl7K129vu5che55ZFOzX2KD0QNYCmsD8Hej-E9_Sgn6N_4_5UaBN8m2iBv7oh8jaZacIaiTOW1JYyHVx1-nlHeGpVQYsf5SwM7gAmtWpK5uDd0oVKT0IlSPSb3vhIOV0gtUgigpyUQbAYoU_6RraQEyQfz1lime83mB9ldngOp7qMszptm33pFOUs5fW4D9mwXbOiU69S06gLyB7tfhxPRTFRM69sTq4cdOjbjOy2Py7HsvzOoEGMdcCBFuxDNA0p1cvPUxq9vcHE0bG7DC1Rs4udPV9VJh-E0PwMSAexsjAG2w",
  "payload": "ewogICJpZGVudGlmaWVycyI6IFsKICAgIHsKICAgICAgInR5cGUiOiAiZG5zIiwKICAgICAgInZhbHVlIjogImIxZTMtZ3IyLXdpa2ktanMud2VzdGV1cm9wZS5jbG91ZGFwcC5henVyZS5jb20iCiAgICB9CiAgXQp9"
}
2023-07-26 12:53:11,047:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "POST /acme/new-order HTTP/1.1" 201 372
2023-07-26 12:53:11,048:DEBUG:acme.client:Received response:
HTTP 201
Server: nginx
Date: Wed, 26 Jul 2023 10:53:10 GMT
Content-Type: application/json
Content-Length: 372
Connection: keep-alive
Boulder-Requester: 1225942037
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-v02.api.letsencrypt.org/directory>;rel="index"
Location: https://acme-v02.api.letsencrypt.org/acme/order/1225942037/197420583887
Replay-Nonce: 327CGKACCNQ-LmlohXO8bOqFzoUdwBW91tW7gB_TcZHb3hw
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "status": "pending",
  "expires": "2023-08-02T10:53:10Z",
  "identifiers": [
    {
      "type": "dns",
      "value": "b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com"
    }
  ],
  "authorizations": [
    "https://acme-v02.api.letsencrypt.org/acme/authz-v3/249137966697"
  ],
  "finalize": "https://acme-v02.api.letsencrypt.org/acme/finalize/1225942037/197420583887"
}
2023-07-26 12:53:11,048:DEBUG:acme.client:Storing nonce: 327CGKACCNQ-LmlohXO8bOqFzoUdwBW91tW7gB_TcZHb3hw
2023-07-26 12:53:11,048:DEBUG:acme.client:JWS payload:
b''
2023-07-26 12:53:11,049:DEBUG:acme.client:Sending POST request to https://acme-v02.api.letsencrypt.org/acme/authz-v3/249137966697:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS12MDIuYXBpLmxldHNlbmNyeXB0Lm9yZy9hY21lL2FjY3QvMTIyNTk0MjAzNyIsICJub25jZSI6ICIzMjdDR0tBQ0NOUS1MbWxvaFhPOGJPcUZ6b1Vkd0JXOTF0VzdnQl9UY1pIYjNodyIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYXV0aHotdjMvMjQ5MTM3OTY2Njk3In0",
  "signature": "N2zd0TQqh-n6RDqPTlLoR_YdFnnrcWmovISt_9Zsk9EkER4ud52GMFnjLTJa_tddlamzBD5vKeTAwYoM5ZlH1jtiJE_19fk1JFvtvBYPVIpSkyM6O-lssriSZeok8nrPM8XSBdS8Vf32VocT30ILq4T3Hpg4yQ2udFUFRK_X7kKeQz-30P2rgWHVweOG8gdUwLk4Tj8HbpwTvF8KrNalkhsiqzj79DeRJjBhi9NrzNyg0o4aJsLAactLL8bgwxR58gRuF06pjQ_wTMlKTZ2r6p85vHF3Ty-Ao3PHQVUP9bCY36vNj-nuil2L2f-8tKpqf7vouT1u-GXGbia0rZ4lFQ",
  "payload": ""
}
2023-07-26 12:53:11,188:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "POST /acme/authz-v3/249137966697 HTTP/1.1" 200 830
2023-07-26 12:53:11,189:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Wed, 26 Jul 2023 10:53:10 GMT
Content-Type: application/json
Content-Length: 830
Connection: keep-alive
Boulder-Requester: 1225942037
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 15C9megk7q17uJET0heJWojTFSZkrCoGGZDvK4NNbZnmZuI
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "identifier": {
    "type": "dns",
    "value": "b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com"
  },
  "status": "pending",
  "expires": "2023-08-02T10:53:10Z",
  "challenges": [
    {
      "type": "http-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/ewqOMg",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    },
    {
      "type": "dns-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/66WSEA",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    },
    {
      "type": "tls-alpn-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/Gl63mw",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    }
  ]
}
2023-07-26 12:53:11,189:DEBUG:acme.client:Storing nonce: 15C9megk7q17uJET0heJWojTFSZkrCoGGZDvK4NNbZnmZuI
2023-07-26 12:53:11,189:INFO:certbot._internal.auth_handler:Performing the following challenges:
2023-07-26 12:53:11,189:INFO:certbot._internal.auth_handler:http-01 challenge for b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com
2023-07-26 12:53:11,190:INFO:certbot.compat.misc:Running manual-auth-hook command: ./scripts/auth-host.sh
2023-07-26 12:53:11,194:WARNING:certbot.display.ops:Hook '--manual-auth-hook' for b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com reported error code 127
2023-07-26 12:53:11,194:DEBUG:certbot._internal.display.obj:Notifying user: Hook '--manual-auth-hook' for b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com ran with output:
 ./scripts/auth-host.sh: line 4: az: command not found
2023-07-26 12:53:11,194:DEBUG:acme.client:JWS payload:
b'{}'
2023-07-26 12:53:11,195:DEBUG:acme.client:Sending POST request to https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/ewqOMg:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS12MDIuYXBpLmxldHNlbmNyeXB0Lm9yZy9hY21lL2FjY3QvMTIyNTk0MjAzNyIsICJub25jZSI6ICIxNUM5bWVnazdxMTd1SkVUMGhlSldvalRGU1prckNvR0daRHZLNE5OYlpubVp1SSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvY2hhbGwtdjMvMjQ5MTM3OTY2Njk3L2V3cU9NZyJ9",
  "signature": "MkfYFvxGq5szSdDR2_qgFpHYMWzdjZUlg5KCzbX2YMfcb_0qDLAA0c_zigW7LAlXuS-__8Sez6gpKOuQvn-tYN2llDWY9yj8m3OsiUOPkbtt5wBpS7uZleKNJI5TDhCVJi2xZ91GO3hDUgCtoKp8rusmf8rj4Wi4vD8xayZVdqMqD_PH2ErBHP2jIlG8oWQIu1zFmDMFQAEYgwuz1U0UerzFp-DDZ8wh9S-0QEa2KCZX-ZmI8nDbYmrtEsQXcGOPMNrpRgQdgH8rLAviznqfExC4fjt9oFG0OK2YYcgdlDOT9-cy_WG6x6M2YwWc-XfsuwiHMYgQIp3vDCy-oNZ1Bg",
  "payload": "e30"
}
2023-07-26 12:53:11,338:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "POST /acme/chall-v3/249137966697/ewqOMg HTTP/1.1" 200 187
2023-07-26 12:53:11,338:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Wed, 26 Jul 2023 10:53:10 GMT
Content-Type: application/json
Content-Length: 187
Connection: keep-alive
Boulder-Requester: 1225942037
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-v02.api.letsencrypt.org/directory>;rel="index", <https://acme-v02.api.letsencrypt.org/acme/authz-v3/249137966697>;rel="up"
Location: https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/ewqOMg
Replay-Nonce: 327COyo2eKf4eJ2jX-R1eCKGohc7kwwQ1nrswHy9WLLRe8I
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "type": "http-01",
  "status": "pending",
  "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/ewqOMg",
  "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
}
2023-07-26 12:53:11,339:DEBUG:acme.client:Storing nonce: 327COyo2eKf4eJ2jX-R1eCKGohc7kwwQ1nrswHy9WLLRe8I
2023-07-26 12:53:11,339:INFO:certbot._internal.auth_handler:Waiting for verification...
2023-07-26 12:53:12,340:DEBUG:acme.client:JWS payload:
b''
2023-07-26 12:53:12,341:DEBUG:acme.client:Sending POST request to https://acme-v02.api.letsencrypt.org/acme/authz-v3/249137966697:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS12MDIuYXBpLmxldHNlbmNyeXB0Lm9yZy9hY21lL2FjY3QvMTIyNTk0MjAzNyIsICJub25jZSI6ICIzMjdDT3lvMmVLZjRlSjJqWC1SMWVDS0dvaGM3a3d3UTFucnN3SHk5V0xMUmU4SSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYXV0aHotdjMvMjQ5MTM3OTY2Njk3In0",
  "signature": "OERdKMscok9tlwdvQzz0fErLTrzdVlY_8YcJhsUTxJf2n9KPvLJC9zSanQGpnk6wFe80gX9DuB2CPCdKCJOorv2NYgU5yzj7j1JLsP3bhAn_OIr2vIfZuWif0MZZU_dscXo6YXzSRAJDTOsTj0TkIPcCeSu5aORBZ_0LeK3n0dcq8C7MCWnWX2Oqul29_wCZufGO2ev_kx-AeOcVpWSgJYQnYc2fA2NTPO7qB5JLE0-VpbByUld9_FTPyZRCJP5uZsfX_-LnjMuYwvFiRVJuI4Efpnahcna4rlGBZGgnmrDmQfPdXuJ_8-5mIvfuwMkK7vhe0Blmrq9V_1TPYTY6RQ",
  "payload": ""
}
2023-07-26 12:53:12,483:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "POST /acme/authz-v3/249137966697 HTTP/1.1" 200 830
2023-07-26 12:53:12,483:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Wed, 26 Jul 2023 10:53:12 GMT
Content-Type: application/json
Content-Length: 830
Connection: keep-alive
Boulder-Requester: 1225942037
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 327CXfWpskeDGp6ebSlt7JoYD9qjRB_uvhBqbFCyloD6hVs
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "identifier": {
    "type": "dns",
    "value": "b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com"
  },
  "status": "pending",
  "expires": "2023-08-02T10:53:10Z",
  "challenges": [
    {
      "type": "http-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/ewqOMg",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    },
    {
      "type": "dns-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/66WSEA",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    },
    {
      "type": "tls-alpn-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/Gl63mw",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    }
  ]
}
2023-07-26 12:53:12,483:DEBUG:acme.client:Storing nonce: 327CXfWpskeDGp6ebSlt7JoYD9qjRB_uvhBqbFCyloD6hVs
2023-07-26 12:53:15,486:DEBUG:acme.client:JWS payload:
b''
2023-07-26 12:53:15,487:DEBUG:acme.client:Sending POST request to https://acme-v02.api.letsencrypt.org/acme/authz-v3/249137966697:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS12MDIuYXBpLmxldHNlbmNyeXB0Lm9yZy9hY21lL2FjY3QvMTIyNTk0MjAzNyIsICJub25jZSI6ICIzMjdDWGZXcHNrZURHcDZlYlNsdDdKb1lEOXFqUkJfdXZoQnFiRkN5bG9ENmhWcyIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYXV0aHotdjMvMjQ5MTM3OTY2Njk3In0",
  "signature": "GZ1t74LuPwOV7y4TB9LlBBgGY74hatpgRNTBkLymhxxog9UGHWrBxOegf1rE_AGdonVeOjpoc-3cgLwv4V0spmM7FAoUWbBX_Frr5Xi-UAM-Dprxl7onDf7cQ9RsupyB4i_aJXbCF6CbPPY12W63e-2TORSVClxk0SKwZ7q0KuF-mQoqUqnuu0RqZK_1NAlPJ_gMncb9qbZqI6ROI9uAdZnuetV27zmZngM8WKex9a3XSJiJ2H6i_NMiPIN7YUK7bwf7VNqT2XHhVHZq--23rVHLqDf4fIjVT0Ir_FTdwAMOBI2C-A45fNbPlvqcZjKVAwYaulwJ-sMNVwn8AZ3SZA",
  "payload": ""
}
2023-07-26 12:53:15,628:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "POST /acme/authz-v3/249137966697 HTTP/1.1" 200 830
2023-07-26 12:53:15,629:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Wed, 26 Jul 2023 10:53:15 GMT
Content-Type: application/json
Content-Length: 830
Connection: keep-alive
Boulder-Requester: 1225942037
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 15C9ANfvC9hyXKianMcJsUIkyZr4pgriGQ285XiX86q8ap8
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "identifier": {
    "type": "dns",
    "value": "b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com"
  },
  "status": "pending",
  "expires": "2023-08-02T10:53:10Z",
  "challenges": [
    {
      "type": "http-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/ewqOMg",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    },
    {
      "type": "dns-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/66WSEA",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    },
    {
      "type": "tls-alpn-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/Gl63mw",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    }
  ]
}
2023-07-26 12:53:15,629:DEBUG:acme.client:Storing nonce: 15C9ANfvC9hyXKianMcJsUIkyZr4pgriGQ285XiX86q8ap8
2023-07-26 12:53:18,633:DEBUG:acme.client:JWS payload:
b''
2023-07-26 12:53:18,634:DEBUG:acme.client:Sending POST request to https://acme-v02.api.letsencrypt.org/acme/authz-v3/249137966697:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS12MDIuYXBpLmxldHNlbmNyeXB0Lm9yZy9hY21lL2FjY3QvMTIyNTk0MjAzNyIsICJub25jZSI6ICIxNUM5QU5mdkM5aHlYS2lhbk1jSnNVSWt5WnI0cGdyaUdRMjg1WGlYODZxOGFwOCIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYXV0aHotdjMvMjQ5MTM3OTY2Njk3In0",
  "signature": "JYXFNlncD2muUg6IxRYHcyVfZrLP0H_09oLokDioxWFnMfefwiJZEam4J7h5LQkwzEJzGbwcq15wWhGN2qCcWXWjhtFRCZgtBHbP7N8B9gnVpQjo-gPXuuboNEEdihUGBOkiHLd_hmK_2L1KIbGc5yxDpMGxB-b2WaWsKt0PVrrBI0B-nO7gUaAjNPM7yccVIED0D-5FV1wfMMsE-FsUZE0XdNfxd2HumGe_8rAHJq_lYinLXGATN9U3D89oGmzZGwVTjfHJ1O4MtIPifUKj6iHeL_GJk4w6kqddsVLCH2xSgoZyM-9Pgji3J2PKpeEcNeCuWZDDbNsDzsMBxCTcQQ",
  "payload": ""
}
2023-07-26 12:53:18,774:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "POST /acme/authz-v3/249137966697 HTTP/1.1" 200 830
2023-07-26 12:53:18,775:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Wed, 26 Jul 2023 10:53:18 GMT
Content-Type: application/json
Content-Length: 830
Connection: keep-alive
Boulder-Requester: 1225942037
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 15C9oyuJ5xpLO04xTMBnKSE2MMSTdwQAT_RJM7QFE5ZhaKA
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "identifier": {
    "type": "dns",
    "value": "b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com"
  },
  "status": "pending",
  "expires": "2023-08-02T10:53:10Z",
  "challenges": [
    {
      "type": "http-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/ewqOMg",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    },
    {
      "type": "dns-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/66WSEA",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    },
    {
      "type": "tls-alpn-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/Gl63mw",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U"
    }
  ]
}
2023-07-26 12:53:18,775:DEBUG:acme.client:Storing nonce: 15C9oyuJ5xpLO04xTMBnKSE2MMSTdwQAT_RJM7QFE5ZhaKA
2023-07-26 12:53:21,779:DEBUG:acme.client:JWS payload:
b''
2023-07-26 12:53:21,780:DEBUG:acme.client:Sending POST request to https://acme-v02.api.letsencrypt.org/acme/authz-v3/249137966697:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS12MDIuYXBpLmxldHNlbmNyeXB0Lm9yZy9hY21lL2FjY3QvMTIyNTk0MjAzNyIsICJub25jZSI6ICIxNUM5b3l1SjV4cExPMDR4VE1CbktTRTJNTVNUZHdRQVRfUkpNN1FGRTVaaGFLQSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvYXV0aHotdjMvMjQ5MTM3OTY2Njk3In0",
  "signature": "hdalpqlOz89MGiGutZp047zH4NshNAjTzUnC-9eD4ipq97fF28VST9Z5E39NjXvgZ46SbSqqxHFQu7NUfM3z0Edzr0frOqeMK0nxjfGrsP7tM6YXuCFuVeGdaAsksp7tiDpclcjKs7Fikz8QYwV-yxNeSE86nq61jZfBQ0WYrMFZkuXt84dJAwSb80an8MT98p2uYo9ftqAGcaxH1zUhbu7JqVn9fwL8wuO03tHoMANQDjfEojoVXlzI5QvKEL_CwGFhm0LPwgDyN5LIcggnHmphq1AWAiSYzXFQzZdM8z632kiyXGmqG5--LLy3n1uTSSd1n8iOmBHh17WYoU8ioQ",
  "payload": ""
}
2023-07-26 12:53:21,922:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "POST /acme/authz-v3/249137966697 HTTP/1.1" 200 1182
2023-07-26 12:53:21,923:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Date: Wed, 26 Jul 2023 10:53:21 GMT
Content-Type: application/json
Content-Length: 1182
Connection: keep-alive
Boulder-Requester: 1225942037
Cache-Control: public, max-age=0, no-cache
Link: <https://acme-v02.api.letsencrypt.org/directory>;rel="index"
Replay-Nonce: 15C9SBNGOVkSUMebEl6NSUOmDNteGuBrUXFxClRmOUtuKAI
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800

{
  "identifier": {
    "type": "dns",
    "value": "b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com"
  },
  "status": "invalid",
  "expires": "2023-08-02T10:53:10Z",
  "challenges": [
    {
      "type": "http-01",
      "status": "invalid",
      "error": {
        "type": "urn:ietf:params:acme:error:connection",
        "detail": "20.16.248.254: Fetching http://b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com/.well-known/acme-challenge/7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U: Timeout during connect (likely firewall problem)",
        "status": 400
      },
      "url": "https://acme-v02.api.letsencrypt.org/acme/chall-v3/249137966697/ewqOMg",
      "token": "7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U",
      "validationRecord": [
        {
          "url": "http://b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com/.well-known/acme-challenge/7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U",
          "hostname": "b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com",
          "port": "80",
          "addressesResolved": [
            "20.16.248.254"
          ],
          "addressUsed": "20.16.248.254"
        }
      ],
      "validated": "2023-07-26T10:53:10Z"
    }
  ]
}
2023-07-26 12:53:21,923:DEBUG:acme.client:Storing nonce: 15C9SBNGOVkSUMebEl6NSUOmDNteGuBrUXFxClRmOUtuKAI
2023-07-26 12:53:21,923:INFO:certbot._internal.auth_handler:Challenge failed for domain b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com
2023-07-26 12:53:21,923:INFO:certbot._internal.auth_handler:http-01 challenge for b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com
2023-07-26 12:53:21,923:DEBUG:certbot._internal.display.obj:Notifying user: 
Certbot failed to authenticate some domains (authenticator: manual). The Certificate Authority reported these problems:
  Domain: b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com
  Type:   connection
  Detail: 20.16.248.254: Fetching http://b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com/.well-known/acme-challenge/7ypOYJADzvXCiR9h_Bt20oAAOyRuddxaJmrTknY7D0U: Timeout during connect (likely firewall problem)

Hint: The Certificate Authority failed to verify the challenge files created by the --manual-auth-hook. Ensure that this hook is functioning correctly. Refer to "certbot --help manual" and the Certbot User Guide.

2023-07-26 12:53:21,924:DEBUG:certbot._internal.error_handler:Encountered exception:
Traceback (most recent call last):
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/auth_handler.py", line 108, in handle_authorizations
    self._poll_authorizations(authzrs, max_retries, max_time_mins, best_effort)
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/auth_handler.py", line 212, in _poll_authorizations
    raise errors.AuthorizationError('Some challenges have failed.')
certbot.errors.AuthorizationError: Some challenges have failed.

2023-07-26 12:53:21,924:DEBUG:certbot._internal.error_handler:Calling registered functions
2023-07-26 12:53:21,924:INFO:certbot._internal.auth_handler:Cleaning up challenges
2023-07-26 12:53:21,925:INFO:certbot.compat.misc:Running manual-cleanup-hook command: ./scripts/cleanup-host.sh
2023-07-26 12:53:21,928:WARNING:certbot.display.ops:Hook '--manual-cleanup-hook' for b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com reported error code 127
2023-07-26 12:53:21,929:DEBUG:certbot._internal.display.obj:Notifying user: Hook '--manual-cleanup-hook' for b1e3-gr2-wiki-js.westeurope.cloudapp.azure.com ran with output:
 ./scripts/cleanup-host.sh: line 4: az: command not found
2023-07-26 12:53:21,929:DEBUG:certbot._internal.log:Exiting abnormally:
Traceback (most recent call last):
  File "/snap/certbot/3024/bin/certbot", line 8, in <module>
    sys.exit(main())
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/main.py", line 19, in main
    return internal_main.main(cli_args)
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/main.py", line 1864, in main
    return config.func(config, plugins)
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/main.py", line 1597, in certonly
    lineage = _get_and_save_cert(le_client, config, domains, certname, lineage)
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/main.py", line 141, in _get_and_save_cert
    lineage = le_client.obtain_and_enroll_certificate(domains, certname)
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/client.py", line 517, in obtain_and_enroll_certificate
    cert, chain, key, _ = self.obtain_certificate(domains)
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/client.py", line 428, in obtain_certificate
    orderr = self._get_order_and_authorizations(csr.data, self.config.allow_subset_of_names)
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/client.py", line 496, in _get_order_and_authorizations
    authzr = self.auth_handler.handle_authorizations(orderr, self.config, best_effort)
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/auth_handler.py", line 108, in handle_authorizations
    self._poll_authorizations(authzrs, max_retries, max_time_mins, best_effort)
  File "/snap/certbot/3024/lib/python3.8/site-packages/certbot/_internal/auth_handler.py", line 212, in _poll_authorizations
    raise errors.AuthorizationError('Some challenges have failed.')
certbot.errors.AuthorizationError: Some challenges have failed.
2023-07-26 12:53:21,932:ERROR:certbot._internal.log:Some challenges have failed.
