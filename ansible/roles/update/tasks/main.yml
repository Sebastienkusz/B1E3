---

- name: "Update repositories"
  become: true
  apt:
    update_cache: true


  # gather_facts: no

  # become: true

  # tasks:
  # - name: "Add a new user named user_one_name"
  #   user:
  #     name: "{{user_one_name}}"
  #     shell: /bin/bash
  #     password: "{{ user_password }}"
  # - name: "Add user_one_name user to the sudoers"
  #   copy:
  #     dest: "/etc/sudoers.d/{{user_one_name}}"
  #     content: "{{user_one_name}} ALL=(ALL) NOPASSWD:ALL"
  # - name: "Deploy SSH Key"
  #   authorized_key: 
  #     user: "{{user_one_name}}"
  #     key: "{{ lookup('file', '../ssh_keys/{{user_one_name}}.pub') }}"
  #     state: present
  # - name: "Disable Password Authentication"
  #   lineinfile:
  #     dest: /etc/ssh/sshd_config
  #     regexp: '^PasswordAuthentication'
  #     line: "PasswordAuthentication no"
  #     state: present
  #     backup: yes

  # - name: "Add a new user named {{user_two_name}}"
  #   user:
  #     name: "{{user_two_name}}"
  #     shell: /bin/bash
  #     password: "{{ user_password }}"
  # - name: "Add sebastien user to the sudoers"
  #   copy:
  #     dest: "/etc/sudoers.d/{{user_two_name}}"
  #     content: "{{user_two_name}} ALL=(ALL) NOPASSWD:ALL"
  # - name: "Deploy SSH Key"
  #   authorized_key: 
  #     user: sebastien
  #     key: "{{ lookup('file', '../ssh_keys/{{user_two_name}}.pub') }}"
  #     state: present
  # - name: "Disable Password Authentication"
  #   lineinfile:
  #     dest: /etc/ssh/sshd_config
  #     regexp: '^PasswordAuthentication'
  #     line: "PasswordAuthentication no"
  #     state: present
  #     backup: yes
 
  # # - name: "Disable Root Login"
  # #   lineinfile:
  # #     dest: /etc/ssh/sshd_config
  # #     regexp: '^PermitRootLogin'
  # #     line: "PermitRootLogin no"
  # #     state: present
  # #     backup: yes
  #   notify:
  #     - restart ssh

  # handlers:
  #   - name: restart ssh
  #     service:
  #       name: sshd
  #       state: restarted
